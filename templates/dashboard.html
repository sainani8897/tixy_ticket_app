{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}
{% block header_title %}Dashboard Overview{% endblock %}

{% block content %}
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
    <div class="bg-blue-500 text-white rounded-lg p-6 shadow-md flex items-center justify-between">
        <div>
            <div class="text-sm font-medium opacity-80">Total Tickets</div>
            <div class="text-4xl font-bold mt-1">{{ total_tickets }}</div>
        </div>
        <svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
    </div>

    <div class="bg-red-500 text-white rounded-lg p-6 shadow-md flex items-center justify-between">
        <div>
            <div class="text-sm font-medium opacity-80">Open Tickets</div>
            <div class="text-4xl font-bold mt-1">{{ open_tickets }}</div>
        </div>
        <svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
    </div>

    <div class="bg-yellow-500 text-white rounded-lg p-6 shadow-md flex items-center justify-between">
        <div>
            <div class="text-sm font-medium opacity-80">In Progress</div>
            <div class="text-4xl font-bold mt-1">{{ in_progress_tickets }}</div>
        </div>
        <svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path></svg>
    </div>

    <div class="bg-green-500 text-white rounded-lg p-6 shadow-md flex items-center justify-between">
        <div>
            <div class="text-sm font-medium opacity-80">Closed Tickets</div>
            <div class="text-4xl font-bold mt-1">{{ closed_tickets }}</div>
        </div>
        <svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
    </div>

    {% if total_users is not none %}
    <div class="bg-purple-500 text-white rounded-lg p-6 shadow-md flex items-center justify-between">
        <div>
            <div class="text-sm font-medium opacity-80">Total Users</div>
            <div class="text-4xl font-bold mt-1">{{ total_users }}</div>
        </div>
        <svg class="w-12 h-12 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.352-1.234-.856-1.571M7 20h5v-2a3 3 0 01-5.356-1.857M7 20v-2c0-.653.352-1.234.856-1.571m0 0A5.002 5.002 0 0112 8a5.002 5.002 0 014.144 2.429m0 0c-.36.059-.72.091-1.08.091m-2.22 0c-.36.059-.72.091-1.08.091M12 10a5.002 5.002 0 00-4.144 2.429m2.22 0A5.002 5.002 0 0012 8c-.36-.059-.72-.091-1.08-.091m-2.22 0c-.36-.059-.72-.091-1.08-.091"></path></svg>
    </div>
    {% endif %}
</div>

<h2 class="text-2xl font-semibold text-gray-800 mb-6">Tickets by Priority</h2>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    {% for priority, count in tickets_by_priority.items() %}
    <div class="bg-white rounded-lg p-6 shadow-md border-t-4
        {% if priority == 'Urgent' %} border-purple-500
        {% elif priority == 'High' %} border-orange-500
        {% elif priority == 'Medium' %} border-blue-500
        {% else %} border-gray-500
        {% endif %}">
        <div class="text-sm font-medium text-gray-600">{{ priority }}</div>
        <div class="text-3xl font-bold mt-1 text-gray-900">{{ count }}</div>
    </div>
    {% endfor %}
</div>
{% endblock %}